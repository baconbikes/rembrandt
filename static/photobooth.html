<html>
<head>
<style type="text/css">
#camera {
  display: block;
  margin-left: auto;
  margin-right: auto;
  height: 600px;
  width: 800px;
  padding: 10px;
}
div#credits {
  display: block;
  margin-left: auto;
  margin-right: auto;
  margin-top: 20px;
  text-align: center;
}
</style>
<script type="text/javascript" src="jquery.2.1.3.min.js"></script>
<script type="text/javascript" src="photobooth.0.7_min.js"></script>
<script type="text/javascript" src="socket.io.2.0.4.slim.js"></script>
<script type="text/javascript">

var socket = io()

var last_credits = 0;

function display_credits(credits) {
  last_credits = credits
  $('span#credits').text(credits)
}

socket.on('credit update', function(credits) {
  display_credits(credits)
})

socket.on('button pressed', function(button) {
  console.log('button pressed: ' + button)
  if (button == "ok") {
    if (last_credits > 0) {
      $('li.trigger').click()
      socket.emit('credit used')
    }
  }
})

$(document).ready(function() {
  $('#camera').photobooth().on("image", function (event, dataUrl) {})
  $.get("/credits", function(msg) {
    display_credits(msg) // in case credits were entered before we started
  })
});

</script>
</head>
<body>
<div id="page_camera"</div>
<div id="camera"></div>
<div id="credits">You have <span id="credits">0</span> credits remaining.</div>
</div>
</body>
</html>